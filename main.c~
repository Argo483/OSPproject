/*main.c*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>
#include "main.h"
#include "SDL/SDL.h"
#include "SDL/SDL_mixer.h"


int main(int argc, char *argv[]){

  int lines;
  
  Mix_Music *music = NULL;
  Mix_Music *music2 = NULL;
  Mix_Music *music3 = NULL; 
  Mix_Music *music4 = NULL;
  Mix_Music *music5 = NULL;
  Mix_Chunk *intro = NULL;
  
  /*Call init function*/
  initMusic();
  
  music = Mix_LoadMUS("music1.mp3");
  music2 = Mix_LoadMUS("music2.mp3");
  music3 = Mix_LoadMUS("music3.mp3");
  music4 = Mix_LoadMUS("music4.mp3");
  music5 = Mix_LoadMUS("music5.mp3");
  intro = Mix_LoadWAV("intro.wav");

  
  if (music == NULL && music2 == NULL && music3 == NULL && music4 == NULL && music5 == NULL){
    perror("Error loading music files! Exiting...\n");
    return EXIT_FAILURE;
    
  }

  if (intro == NULL){
    perror("Error loading sound effect! Exiting...\n");
    return EXIT_FAILURE;
  }

  
  
  
  /*If no music is playing, play music*/
  /*if (Mix_PlayingMusic() == 0){
    
    if(Mix_PlayMusic(music, -1) == -1){
      return 1;
      
    }
    
  }*/
  
  /*Play sound effect*/
  Mix_PlayChannel(-1, intro, 0);
  
  clearScreen();

  printf("                   	  Raspberry Pi Dup-Box v1.0\n");
  printf("                -------------------------------------------\n\n");
  printf("                By Ryan Larke, James Snee and Bella Pollock\n");
  printf("		    Uses the SDL and SDL Mixer Libraries\n");
  printf("		      The process ID of this run is: %d\n", getpid());
  
  for (lines = 0; lines < 10; lines++){
    
    printf("\n");
    
  }
  
  printf("Press enter to continue...\n");
  getchar();
  /*Stop sound effect if still playing*/
  Mix_HaltChannel(-1);

  clearScreen();
  drawMenu(music, music2, music3, music4, music5);
  
  /*Free music*/
  Mix_FreeMusic(music);
  Mix_FreeMusic(music2);
  Mix_FreeMusic(music3);
  Mix_FreeMusic(music4);
  Mix_FreeMusic(music5);
  Mix_FreeChunk(intro);
 
  clearScreen();
  printf("Thank you for using Pi Dup-Box!\n");

  /*Quit SDL, frees graphics*/
  SDL_Quit();
return EXIT_SUCCESS;
}
